<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>向派生函数添加属性 | OP Stack Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/logos/favicon.png">
    <link rel="alternate" type="application/atom+xml" href="https://stack.optimism.io/atom.xml" title="OP Stack Docs Atom Feed">
    <link rel="alternate" type="application/json" href="https://stack.optimism.io/feed.json" title="OP Stack Docs JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://stack.optimism.io/rss.xml" title="OP Stack Docs RSS Feed">
    <meta name="description" content="The OP Stack Docs">
    <meta property="og:url" content="/docs/build/tutorials/add-attr.html">
    <meta property="og:site_name" content="OP Stack Docs">
    <meta property="og:title" content="向派生函数添加属性">
    <meta property="og:description" content="🚧 OP Stack Hacks 是一些明确不适用于生产环境的 OP Stack 技巧 OP Stack Hacks 不适合新手。您将无法获得针对 OP Stack Hacks 的重要开发者支持 - 请准备好自己动手并在没有支持的情况下工作。 概述 在本指南中，我们将修改 Bedrock Rollup。虽然有很多修改 OP Stack 的方法，但在本教程中">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="OP Stack Docs">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta property="og:image" content="https://stack.optimism.io/assets/logos/twitter-logo.png">
    <meta name="twitter:image" content="https://stack.optimism.io/assets/logos/twitter-logo.png">
    <meta name="twitter:title" content="OP Stack Docs">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.05d6b1d5.css" as="style"><link rel="preload" href="/assets/js/app.a10c3567.js" as="script"><link rel="preload" href="/assets/js/layout-Layout.203bc08b.js" as="script"><link rel="preload" href="/assets/js/layout-Blog~layout-Layout~layout-NotFound.3f9ea462.js" as="script"><link rel="preload" href="/assets/js/page-向派生函数添加属性.96209ab2.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.668d9695.js" as="script"><link rel="prefetch" href="/assets/js/41.f0f3702e.js"><link rel="prefetch" href="/assets/js/layout-Blog.a994568e.js"><link rel="prefetch" href="/assets/js/layout-NotFound.1ba9c6f7.js"><link rel="prefetch" href="/assets/js/layout-Slide.84c3cb7a.js"><link rel="prefetch" href="/assets/js/page-BedrockExplainer.94d12776.js"><link rel="prefetch" href="/assets/js/page-Bedrock与L1以太坊之间的差异.8cd91997.js"><link rel="prefetch" href="/assets/js/page-OPStackDocs.59efd7a5.js"><link rel="prefetch" href="/assets/js/page-OPStackHacks简介.f30301fb.js"><link rel="prefetch" href="/assets/js/page-OPStack代码库V1-Bedrock.3aa1884a.js"><link rel="prefetch" href="/assets/js/page-OPStack全貌.61392c30.js"><link rel="prefetch" href="/assets/js/page-Rollup操作.0d703b3b.js"><link rel="prefetch" href="/assets/js/page-Superchain解释器.89242b1c.js"><link rel="prefetch" href="/assets/js/page-WelcometotheOPStack.b8bd9ef7.js"><link rel="prefetch" href="/assets/js/page-为有用软件而设计的原则.2fc5fb96.js"><link rel="prefetch" href="/assets/js/page-从OPStack区块链中强制提取资产.9051bd64.js"><link rel="prefetch" href="/assets/js/page-使用OPStackClientSDK.b54e1490.js"><link rel="prefetch" href="/assets/js/page-使用OPStack进行构建.bdc6fc4a.js"><link rel="prefetch" href="/assets/js/page-修改预部署合约.c797a1aa.js"><link rel="prefetch" href="/assets/js/page-区块浏览器和索引器.c803de8a.js"><link rel="prefetch" href="/assets/js/page-发布历史.69ab2491.js"><link rel="prefetch" href="/assets/js/page-安全策略、漏洞报告和赏金计划.41700a4f.js"><link rel="prefetch" href="/assets/js/page-常见安全问题.4686caaa.js"><link rel="prefetch" href="/assets/js/page-常见的安全问题.12aaeb7b.js"><link rel="prefetch" href="/assets/js/page-快速开始.4118c74c.js"><link rel="prefetch" href="/assets/js/page-执行技巧.afc3d4ed.js"><link rel="prefetch" href="/assets/js/page-数据可用性技巧.be17871a.js"><link rel="prefetch" href="/assets/js/page-暂停和恢复桥接.cd2944e7.js"><link rel="prefetch" href="/assets/js/page-添加一个预编译合约.8a6381b1.js"><link rel="prefetch" href="/assets/js/page-特色黑客技巧.dec0ea51.js"><link rel="prefetch" href="/assets/js/page-结算层技巧.9da9c0a8.js"><link rel="prefetch" href="/assets/js/page-衍生技巧.9334377a.js"><link rel="prefetch" href="/assets/js/page-贡献指南.da66b8ad.js"><link rel="prefetch" href="/assets/js/page-配置.fe26aa4e.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.9346ec91.js"><link rel="prefetch" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.aa392ad9.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.b538c7ab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.05d6b1d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/assets/logos/logo.png" alt="OP Stack Docs" class="logo"> <!----> <span class="site-name can-hide">OP Stack Docs</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><!----> <form id="search-form" role="search" class="algolia-search-wrapper search-box"><label for="algolia-search-input" class="sr-only">Algolia search</label> <input id="algolia-search-input" placeholder="" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.optimism.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  OP Stack Docs
</a></div><div class="nav-item"><a href="https://community.optimism.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Optimism Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://community.optimism.io/docs/governance/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Governance
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title"><!---->
        Community
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="https://discord.optimism.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-discord color-discord"></i>
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><a href="https://github.com/ethereum-optimism/optimism" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-github color-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><a href="https://twitter.com/optimismFND" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-twitter color-twitter"></i>
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><a href="https://www.twitch.tv/optimismpbc" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-twitch color-twitch"></i>
  Twitch
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><a href="https://optimismpbc.medium.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-medium color-medium"></i>
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><a href="https://www.optimism.io/apps/all" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont far fa-computer-classic color-ecosystem"></i>
  Ecosystem
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><a href="https://www.optimism.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont far fa-globe color-optimism"></i>
  optimism.io
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="https://www.optimism.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  OP Stack Docs
</a></div><div class="nav-item"><a href="https://community.optimism.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Optimism Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://community.optimism.io/docs/governance/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  Governance
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title"><!---->
      Community
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://discord.optimism.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-discord color-discord"></i>
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/ethereum-optimism/optimism" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-github color-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/optimismFND" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-twitter color-twitter"></i>
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.twitch.tv/optimismpbc" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-twitch color-twitch"></i>
  Twitch
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://optimismpbc.medium.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont fab fa-medium color-medium"></i>
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.optimism.io/apps/all" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont far fa-computer-classic color-ecosystem"></i>
  Ecosystem
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.optimism.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont far fa-globe color-optimism"></i>
  optimism.io
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">OP Stack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/" aria-current="page" class="sidebar-link">Welcome to the OP Stack</a></li><li><a href="/docs/understand/design-principles/" class="sidebar-link">设计原则</a></li><li><a href="/docs/understand/landscape/" class="sidebar-link">OP Stack 全貌</a></li><li><a href="/docs/understand/explainer/" class="sidebar-link">Superchain解释器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">Releases</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/releases/" class="sidebar-link">发布历史</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Bedrock</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">Building OP Stack Rollups</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/build/getting-started/" class="sidebar-link">快速开始</a></li><li><a href="/docs/build/conf/" class="sidebar-link">配置</a></li><li><a href="/docs/build/operations/" class="sidebar-link">Rollup操作</a></li><li><a href="/docs/build/explorer/" class="sidebar-link">区块浏览器和索引器</a></li><li><a href="/docs/build/sdk/" class="sidebar-link">使用 OP Stack Client SDK</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable open"><!----> <span class="title">OP Stack Hacks</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/build/hacks/" class="sidebar-link">OP Stack Hacks简介</a></li><li><a href="/docs/build/featured/" class="sidebar-link">特色黑客技巧</a></li><li><a href="/docs/build/data-avail/" class="sidebar-link">数据可用性技巧</a></li><li><a href="/docs/build/derivation/" class="sidebar-link">衍生技巧</a></li><li><a href="/docs/build/execution/" class="sidebar-link">执行技巧</a></li><li><a href="/docs/build/settlement/" class="sidebar-link">结算层技巧</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading clickable open"><!----> <span class="title">Sample Hacks</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/build/tutorials/add-attr/" aria-current="page" class="active sidebar-link">向派生函数添加属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/build/tutorials/add-attr/#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/docs/build/tutorials/add-attr/#获取灵感" class="sidebar-link">获取灵感</a></li><li class="sidebar-sub-header"><a href="/docs/build/tutorials/add-attr/#部署燃烧合约" class="sidebar-link">部署燃烧合约</a></li><li class="sidebar-sub-header"><a href="/docs/build/tutorials/add-attr/#添加燃烧交易" class="sidebar-link">添加燃烧交易</a></li><li class="sidebar-sub-header"><a href="/docs/build/tutorials/add-attr/#插入燃烧交易" class="sidebar-link">插入燃烧交易</a></li><li class="sidebar-sub-header"><a href="/docs/build/tutorials/add-attr/#重新构建您的-op-node" class="sidebar-link">重新构建您的 op-node</a></li><li class="sidebar-sub-header"><a href="/docs/build/tutorials/add-attr/#检查结果" class="sidebar-link">检查结果</a></li><li class="sidebar-sub-header"><a href="/docs/build/tutorials/add-attr/#结论" class="sidebar-link">结论</a></li></ul></li><li><a href="/docs/build/tutorials/new-precomp/" class="sidebar-link">添加一个预编译合约</a></li><li><a href="/docs/build/tutorials/predeploys/" class="sidebar-link">修改预部署合约</a></li></ul></section></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">Contributing</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/contribute/" class="sidebar-link">贡献指南</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">Security</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/security/faq/" class="sidebar-link">常见安全问题</a></li><li><a href="/docs/security/policy/" class="sidebar-link">安全策略、漏洞报告和赏金计划</a></li><li><a href="/docs/security/pause/" class="sidebar-link">暂停和恢复桥接</a></li><li><a href="/docs/security/forced-withdrawal/" class="sidebar-link">从 OP Stack 区块链中强制提取资产</a></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><!----> <div class="content__page-top"></div> <nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/docs/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">OP Stack Docs</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a href="/docs/build/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">使用 OP Stack 进行构建</span></a> <meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/docs/build/tutorials/add-attr/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">向派生函数添加属性</span></a> <meta property="position" content="3"></li></ol></nav> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">向派生函数添加属性</span></h1> <!----> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-header">On this page</div><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/docs/build/tutorials/add-attr/#概述" class="anchor-link heading2"><div>概述</div></a></li><li class="anchor"><a href="/docs/build/tutorials/add-attr/#获取灵感" class="anchor-link heading2"><div>获取灵感</div></a></li><li class="anchor"><a href="/docs/build/tutorials/add-attr/#部署燃烧合约" class="anchor-link heading2"><div>部署燃烧合约</div></a></li><li class="anchor"><a href="/docs/build/tutorials/add-attr/#添加燃烧交易" class="anchor-link heading2"><div>添加燃烧交易</div></a></li><li class="anchor"><a href="/docs/build/tutorials/add-attr/#插入燃烧交易" class="anchor-link heading2"><div>插入燃烧交易</div></a></li><li class="anchor"><a href="/docs/build/tutorials/add-attr/#重新构建您的-op-node" class="anchor-link heading2"><div>重新构建您的 op-node</div></a></li><li class="anchor"><a href="/docs/build/tutorials/add-attr/#检查结果" class="anchor-link heading2"><div>检查结果</div></a></li><li class="anchor"><a href="/docs/build/tutorials/add-attr/#结论" class="anchor-link heading2"><div>结论</div></a></li></ul></div><div><div class="anchor-header anchor-support">Support</div><div class="anchor-support-links"><a href="https://discord.optimism.io" target="_blank"><div><i class="fab fa-discord"></i> Discord community</div></a><a href="https://forms.monday.com/forms/c867f3f357707ff1fb4af0d3d5080710?r=use1" target="_blank"><div><i class="far fa-comment-dots"></i> Get support for going live</div></a><a href="https://github.com/ethereum-optimism/optimism/issues" target="_blank"><div><i class="fab fa-github"></i> Make an issue on GitHub</div></a><a href="https://github.com/ethereum-optimism/optimism/contribute" target="_blank"><div><i class="far fa-hands-helping"></i> Contribute to Optimism</div></a></div></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><div class="custom-block warning"><p class="custom-block-title">🚧 OP Stack Hacks 是一些明确不适用于生产环境的 OP Stack 技巧</p> <p>OP Stack Hacks 不适合新手。您将无法获得针对 OP Stack Hacks 的重要开发者支持 - 请准备好自己动手并在没有支持的情况下工作。</p></div> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>在本指南中，我们将修改 Bedrock Rollup。虽然有很多修改 OP Stack 的方法，但在本教程中，我们将专注于修改派生函数。具体而言，我们将更新派生函数以跟踪在 L1 上燃烧的 ETH 的数量！谁会告诉 <a href="http://ultrasound.money" target="_blank" rel="noopener noreferrer">ultrasound.money<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 他们应该用 OP Stack 链替换后端呢？</p> <h2 id="获取灵感"><a href="#获取灵感" class="header-anchor">#</a> 获取灵感</h2> <p>让我们快速回顾一下我们即将做的事情。<code>op-node</code> 负责生成引擎 API 负载，以触发 <code>op-geth</code> 生成区块和交易。<code>op-node</code> 已经为每个 L1 块生成了一个“系统交易”，用于向 L2 链传递有关当前 L1 状态的信息。我们将修改 <code>op-node</code>，添加一个新的系统交易，报告每个块中的总燃烧金额（基础费用乘以使用的 gas）。</p> <p>虽然听起来可能很复杂，但整个过程只涉及部署一个智能合约，向 <code>op-node</code> 添加一个新文件，并修改 <code>op-node</code> 中的一个现有文件。这将是无痛的。让我们开始吧！</p> <h2 id="部署燃烧合约"><a href="#部署燃烧合约" class="header-anchor">#</a> 部署燃烧合约</h2> <p>我们将在 Rollup 上使用一个智能合约来存储 <code>op-node</code> 对 L1 燃烧的报告。以下是我们智能合约的代码：</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.0</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @title L1Burn
 * @notice L1Burn keeps track of the total amount of ETH burned on L1.
 */</span>
<span class="token keyword">contract</span> <span class="token class-name">L1Burn</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * @notice Total amount of ETH burned on L1.
     */</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> total<span class="token punctuation">;</span>

    <span class="token comment">/**
     * @notice Mapping of blocks numbers to total burn.
     */</span>
    <span class="token keyword">mapping</span> <span class="token punctuation">(</span><span class="token builtin">uint64</span> <span class="token operator">=&gt;</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token keyword">public</span> reports<span class="token punctuation">;</span>

    <span class="token comment">/**
     * @notice Allows the system address to submit a report.
     *
     * @param _blocknum L1 block number the report corresponds to.
     * @param _burn     Amount of ETH burned in the block.
     */</span>
    <span class="token keyword">function</span> <span class="token function">report</span><span class="token punctuation">(</span><span class="token builtin">uint64</span> _blocknum<span class="token punctuation">,</span> <span class="token builtin">uint64</span> _burn<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>
            msg<span class="token punctuation">.</span>sender <span class="token operator">==</span> <span class="token number">0xDeaDDEaDDeAdDeAdDEAdDEaddeAddEAdDEAd0001</span><span class="token punctuation">,</span>
            <span class="token string">&quot;L1Burn: reports can only be made from system address&quot;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        total <span class="token operator">+=</span> _burn<span class="token punctuation">;</span>
        reports<span class="token punctuation">[</span>_blocknum<span class="token punctuation">]</span> <span class="token operator">=</span> total<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @notice Tallies up the total burn since a given block number.
     *
     * @param _blocknum L1 block number to tally from.
     *
     * @return Total amount of ETH burned since the given block number;
     */</span>
    <span class="token keyword">function</span> <span class="token function">tally</span><span class="token punctuation">(</span><span class="token builtin">uint64</span> _blocknum<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> total <span class="token operator">-</span> reports<span class="token punctuation">[</span>_blocknum<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>将这个智能合约部署到您的 L2（使用任何您方便的工具）。记下合约部署的地址，因为您一会儿会用到它。简单！</p> <h2 id="添加燃烧交易"><a href="#添加燃烧交易" class="header-anchor">#</a> 添加燃烧交易</h2> <p>现在我们需要在 <code>op-node</code> 中添加逻辑，以便在生成 L1 块时自动提交燃烧报告。由于这个交易与报告其他 L1 块信息的系统交易非常相似（在 <a href="https://github.com/ethereum-optimism/optimism/blob/c9cd1215b76111888e25ee27a49a0bc0c4eeb0f8/op-node/rollup/derive/l1_block_info.go" target="_blank" rel="noopener noreferrer">l1_block_info.go<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中找到），我们将使用该交易作为起点。</p> <ol><li><p>导航到 <code>op-node</code> 包：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/optimism/op-node
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>在 <code>rollup/derive</code> 文件夹中创建一个名为 <code>l1_burn_info.go</code> 的新文件：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">touch</span> rollup/derive/l1_burn_info.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>将以下内容粘贴到 <code>l1_burn_info.go</code> 文件中，并确保将 <code>YOUR_BURN_CONTRACT_HERE</code> 替换为您刚刚部署的 <code>L1Burn</code> 合约的地址。</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> derive

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;bytes&quot;</span>
    <span class="token string">&quot;encoding/binary&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;math/big&quot;</span>

    <span class="token string">&quot;github.com/ethereum/go-ethereum/common&quot;</span>
    <span class="token string">&quot;github.com/ethereum/go-ethereum/core/types&quot;</span>
    <span class="token string">&quot;github.com/ethereum/go-ethereum/crypto&quot;</span>

    <span class="token string">&quot;github.com/ethereum-optimism/optimism/op-node/eth&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
    L1BurnFuncSignature <span class="token operator">=</span> <span class="token string">&quot;report(uint64,uint64)&quot;</span>
    L1BurnArguments     <span class="token operator">=</span> <span class="token number">2</span>
    L1BurnLen           <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">32</span><span class="token operator">*</span>L1BurnArguments
<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
    L1BurnFuncBytes4 <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">Keccak256</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>L1BurnFuncSignature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>
    L1BurnAddress    <span class="token operator">=</span> common<span class="token punctuation">.</span><span class="token function">HexToAddress</span><span class="token punctuation">(</span><span class="token string">&quot;YOUR_BURN_CONTRACT_HERE&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> L1BurnInfo <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Number <span class="token builtin">uint64</span>
    Burn   <span class="token builtin">uint64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>info <span class="token operator">*</span>L1BurnInfo<span class="token punctuation">)</span> <span class="token function">MarshalBinary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> L1BurnLen<span class="token punctuation">)</span>
    offset <span class="token operator">:=</span> <span class="token number">0</span>
    <span class="token function">copy</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>offset<span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> L1BurnFuncBytes4<span class="token punctuation">)</span>
    offset <span class="token operator">+=</span> <span class="token number">4</span>
    binary<span class="token punctuation">.</span>BigEndian<span class="token punctuation">.</span><span class="token function">PutUint64</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>offset<span class="token operator">+</span><span class="token number">24</span><span class="token punctuation">:</span>offset<span class="token operator">+</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span>Number<span class="token punctuation">)</span>
    offset <span class="token operator">+=</span> <span class="token number">32</span>
    binary<span class="token punctuation">.</span>BigEndian<span class="token punctuation">.</span><span class="token function">PutUint64</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>offset<span class="token operator">+</span><span class="token number">24</span><span class="token punctuation">:</span>offset<span class="token operator">+</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span>Burn<span class="token punctuation">)</span>
    <span class="token keyword">return</span> data<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>info <span class="token operator">*</span>L1BurnInfo<span class="token punctuation">)</span> <span class="token function">UnmarshalBinary</span><span class="token punctuation">(</span>data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">!=</span> L1InfoLen <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;data is unexpected length: %d&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> padding <span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
    offset <span class="token operator">:=</span> <span class="token number">4</span>
    info<span class="token punctuation">.</span>Number <span class="token operator">=</span> binary<span class="token punctuation">.</span>BigEndian<span class="token punctuation">.</span><span class="token function">Uint64</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>offset<span class="token operator">+</span><span class="token number">24</span> <span class="token punctuation">:</span> offset<span class="token operator">+</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token operator">!</span>bytes<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>offset<span class="token punctuation">:</span>offset<span class="token operator">+</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">,</span> padding<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;l1 burn tx number exceeds uint64 bounds: %x&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>offset<span class="token punctuation">:</span>offset<span class="token operator">+</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    offset <span class="token operator">+=</span> <span class="token number">32</span>
    info<span class="token punctuation">.</span>Burn <span class="token operator">=</span> binary<span class="token punctuation">.</span>BigEndian<span class="token punctuation">.</span><span class="token function">Uint64</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>offset<span class="token operator">+</span><span class="token number">24</span> <span class="token punctuation">:</span> offset<span class="token operator">+</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token operator">!</span>bytes<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>offset<span class="token punctuation">:</span>offset<span class="token operator">+</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">,</span> padding<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;l1 burn tx burn exceeds uint64 bounds: %x&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>offset<span class="token punctuation">:</span>offset<span class="token operator">+</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">L1BurnDepositTxData</span><span class="token punctuation">(</span>data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>L1BurnInfo<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> info L1BurnInfo
    err <span class="token operator">:=</span> info<span class="token punctuation">.</span><span class="token function">UnmarshalBinary</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">return</span> info<span class="token punctuation">,</span> err
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">L1BurnDeposit</span><span class="token punctuation">(</span>seqNumber <span class="token builtin">uint64</span><span class="token punctuation">,</span> block eth<span class="token punctuation">.</span>BlockInfo<span class="token punctuation">,</span> sysCfg eth<span class="token punctuation">.</span>SystemConfig<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>types<span class="token punctuation">.</span>DepositTx<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    infoDat <span class="token operator">:=</span> L1BurnInfo<span class="token punctuation">{</span>
        Number<span class="token punctuation">:</span> block<span class="token punctuation">.</span><span class="token function">NumberU64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        Burn<span class="token punctuation">:</span>   block<span class="token punctuation">.</span><span class="token function">BaseFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Uint64</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> block<span class="token punctuation">.</span><span class="token function">GasUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    data<span class="token punctuation">,</span> err <span class="token operator">:=</span> infoDat<span class="token punctuation">.</span><span class="token function">MarshalBinary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
    <span class="token punctuation">}</span>
    source <span class="token operator">:=</span> L1InfoDepositSource<span class="token punctuation">{</span>
        L1BlockHash<span class="token punctuation">:</span> block<span class="token punctuation">.</span><span class="token function">Hash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        SeqNumber<span class="token punctuation">:</span>   seqNumber<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>types<span class="token punctuation">.</span>DepositTx<span class="token punctuation">{</span>
        SourceHash<span class="token punctuation">:</span>          source<span class="token punctuation">.</span><span class="token function">SourceHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        From<span class="token punctuation">:</span>                L1InfoDepositerAddress<span class="token punctuation">,</span>
        To<span class="token punctuation">:</span>                  <span class="token operator">&amp;</span>L1BurnAddress<span class="token punctuation">,</span>
        Mint<span class="token punctuation">:</span>                <span class="token boolean">nil</span><span class="token punctuation">,</span>
        Value<span class="token punctuation">:</span>               big<span class="token punctuation">.</span><span class="token function">NewInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        Gas<span class="token punctuation">:</span>                 <span class="token number">150</span>_000_000<span class="token punctuation">,</span>
        IsSystemTransaction<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        Data<span class="token punctuation">:</span>                data<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">L1BurnDepositBytes</span><span class="token punctuation">(</span>seqNumber <span class="token builtin">uint64</span><span class="token punctuation">,</span> l1Info eth<span class="token punctuation">.</span>BlockInfo<span class="token punctuation">,</span> sysCfg eth<span class="token punctuation">.</span>SystemConfig<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dep<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">L1BurnDeposit</span><span class="token punctuation">(</span>seqNumber<span class="token punctuation">,</span> l1Info<span class="token punctuation">,</span> sysCfg<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;failed to create L1 burn tx: %w&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    l1Tx <span class="token operator">:=</span> types<span class="token punctuation">.</span><span class="token function">NewTx</span><span class="token punctuation">(</span>dep<span class="token punctuation">)</span>
    opaqueL1Tx<span class="token punctuation">,</span> err <span class="token operator">:=</span> l1Tx<span class="token punctuation">.</span><span class="token function">MarshalBinary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;failed to encode L1 burn tx: %w&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> opaqueL1Tx<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br></div></div><p>如果你感兴趣，可以随意查看这个文件。它相对简单，主要是定义了一个新的交易类型，并描述了如何对该交易进行编码。</p></li></ol> <h2 id="插入燃烧交易"><a href="#插入燃烧交易" class="header-anchor">#</a> 插入燃烧交易</h2> <p>最后，我们需要更新 <code>~/optimism/op-node/rollup/derive/attributes.go</code> 文件，将新的燃烧交易插入到每个区块中。您需要进行以下更改：</p> <ol><li><p>找到以下代码行：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>l1InfoTx<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">L1InfoDepositBytes</span><span class="token punctuation">(</span>seqNumber<span class="token punctuation">,</span> l1Info<span class="token punctuation">,</span> sysConfig<span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> <span class="token function">NewCriticalError</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;failed to create l1InfoTx: %w&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>在这些代码行之后，添加以下代码片段：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>l1BurnTx<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">L1BurnDepositBytes</span><span class="token punctuation">(</span>seqNumber<span class="token punctuation">,</span> l1Info<span class="token punctuation">,</span> sysConfig<span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> <span class="token function">NewCriticalError</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;failed to create l1InfoTx: %w&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>紧接着，更改以下行：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>txs <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>hexutil<span class="token punctuation">.</span>Bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">+</span><span class="token function">len</span><span class="token punctuation">(</span>depositTxs<span class="token punctuation">)</span><span class="token punctuation">)</span>
txs <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>txs<span class="token punctuation">,</span> l1InfoTx<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>to</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>txs <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>hexutil<span class="token punctuation">.</span>Bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">+</span><span class="token function">len</span><span class="token punctuation">(</span>depositTxs<span class="token punctuation">)</span><span class="token punctuation">)</span>
txs <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>txs<span class="token punctuation">,</span> l1InfoTx<span class="token punctuation">)</span>
txs <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>txs<span class="token punctuation">,</span> l1BurnTx<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <p>我们在这里做的只是在每个 <code>l1InfoTx</code> 之后创建一个新的燃烧交易，并将其插入到每个区块中。</p> <h2 id="重新构建您的-op-node"><a href="#重新构建您的-op-node" class="header-anchor">#</a> 重新构建您的 op-node</h2> <p>在我们能够看到这个变化生效之前，您需要重新构建您的 <code>op-node</code>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/optimism/op-node
<span class="token function">make</span> op-node
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>现在启动您的 <code>op-node</code>，如果它没有运行，请重新启动您的 <code>op-node</code>，如果它已经在运行中。您应该立即看到变化 - 新的区块将包含两个系统交易而不仅仅是一个！</p> <h2 id="检查结果"><a href="#检查结果" class="header-anchor">#</a> 检查结果</h2> <p>查询您的合约的 <code>total</code> 函数，您应该看到总数慢慢增加。尝试使用 <code>tally</code> 函数获取自某个 L2 区块以来燃烧的 gas 数量。您可以使用这个功能来实现一个以 OP Stack 作为后端的 <a href="http://ultrasound.money" target="_blank" rel="noopener noreferrer">ultrasound.money<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 版本。我们做到了，Reddit！</p> <p>获取总数的一种方法是运行以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">ETH_RPC_URL</span><span class="token operator">=</span>http://localhost:8545
cast call <span class="token operator">&lt;</span>YOUR_BURN_CONTRACT_HERE<span class="token operator">&gt;</span> <span class="token string">&quot;total()&quot;</span> <span class="token operator">|</span> cast --from-wei
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="结论"><a href="#结论" class="header-anchor">#</a> 结论</h2> <p>通过对 <code>op-node</code> 进行一些微小的更改，您刚刚实现了对 OP Stack 的改变，使您能够跟踪 L1 ETH 在 L2 上的燃烧情况。通过一个实时的 Cannon 容错系统，您不仅能够在 L2 上跟踪 L1 的燃烧情况，还能够向 L1 上的合约 <em>证明</em> 这种燃烧。您可以在燃烧的 ETH 数量上建立一个无需信任的预测市场。这太疯狂了！</p> <p>OP Stack 是一个非常强大的平台，可以让您以无需信任的方式执行大量计算。对于智能合约来说，这是一个超能力。跟踪 L1 的燃烧只是您可以在 OP Stack 上做的许多疯狂事情中的一种。如果您正在寻找灵感，或者想看看其他人在 OP Stack 上构建了什么，可以查看我们的 OP Stack Hacks 页面。也许您会找到一个您想要参与的项目，或者您会获得建立下一个杀手级智能合约所需的灵感。</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="footer-box"><div class="footer-box-area"><span class="footer-section-header">About this page</span> <ul><li>Updated: 2023年12月3日</li></ul></div> <div class="footer-box-area"><span class="footer-section-header">Contribute</span> <ul><li><a href="https://github.com/ethereum-optimism/stack-docs/edit/main/src/docs/build/tutorials/add-attr.md" target="_blank" rel="noopener noreferrer"><i class="far fa-pencil"></i> Edit this page
          </a></li> <li><a href="https://github.com/ethereum-optimism/optimism/contribute" target="_blank" rel="noopener noreferrer"><i class="far fa-hands-helping"></i> Contribute to Optimism
          </a></li></ul></div> <div class="footer-box-area"><span class="footer-section-header">Still need help?</span> <ul><li><a href="https://discord.optimism.io" target="_blank" rel="noopener noreferrer"><i class="fab fa-discord"></i> Discord community
          </a></li> <li><a href="https://forms.monday.com/forms/c867f3f357707ff1fb4af0d3d5080710?r=use1" target="_blank" rel="noopener noreferrer"><i class="far fa-comment-dots"></i> Get support for going live
          </a></li></ul></div></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/docs/build/settlement/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        结算层技巧
      </a></span> <span class="next"><a href="/docs/build/tutorials/new-precomp/">
        添加一个预编译合约
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div> <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-9KLVB8X0ME"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-9KLVB8X0ME');
  </script></main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.a10c3567.js" defer></script><script src="/assets/js/layout-Layout.203bc08b.js" defer></script><script src="/assets/js/layout-Blog~layout-Layout~layout-NotFound.3f9ea462.js" defer></script><script src="/assets/js/page-向派生函数添加属性.96209ab2.js" defer></script><script src="/assets/js/vendors~layout-Layout.668d9695.js" defer></script>
  </body>
</html>
