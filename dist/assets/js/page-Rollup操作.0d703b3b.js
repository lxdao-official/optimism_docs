(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{642:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"停止rollup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止rollup"}},[s._v("#")]),s._v(" 停止Rollup")]),s._v(" "),a("p",[s._v("有序关闭的顺序与组件启动的顺序相反：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("停止batcher，请使用以下命令：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"id":0,"jsonrpc":"2.0","method":"admin_stopBatcher","params":[]}\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n     -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type: application/json"')]),s._v(" http://localhost:8548 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("这样，batcher会知道将其缓存的任何数据保存到L1。在停止进程之前，请等待在batcher的输出中看到"),a("code",[s._v("Batch Submitter stopped")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("停止op-node。\n该组件是无状态的，所以可以直接停止进程。")])]),s._v(" "),a("li",[a("p",[s._v("停止op-geth。\n请确保使用"),a("strong",[s._v("CTRL-C")]),s._v("来避免数据库损坏。")])])]),s._v(" "),a("h2",{attrs:{id:"启动rollup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动rollup"}},[s._v("#")]),s._v(" 启动Rollup")]),s._v(" "),a("p",[s._v("要重新启动区块链，请按照初始化时的组件顺序进行操作。")]),s._v(" "),a("ol",[a("li",[a("p",[a("code",[s._v("op-geth")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("op-node")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("op-batcher")])]),s._v(" "),a("p",[s._v("如果"),a("code",[s._v("op-batcher")]),s._v("仍在运行，并且您刚刚使用RPC停止了它，您可以使用以下命令启动它：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"id":0,"jsonrpc":"2.0","method":"admin_startBatcher","params":[]}\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type: application/json"')]),s._v(" http://localhost:8548 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq   \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("同步需要时间")]),s._v(" "),a("p",[a("code",[s._v("op-batcher")]),s._v("可能会出现类似以下的警告消息：")]),s._v(" "),a("h2",{attrs:{id:"添加节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加节点"}},[s._v("#")]),s._v(" 添加节点")]),s._v(" "),a("p",[s._v("要向Rollup添加节点，您需要初始化"),a("code",[s._v("op-node")]),s._v("和"),a("code",[s._v("op-geth")]),s._v("，与您为第一个节点所做的操作类似。\n不应该添加"),a("code",[s._v("op-batcher")]),s._v("，只应该有一个。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("配置操作系统和先决条件，与您为第一个节点所做的操作相同。")])]),s._v(" "),a("li",[a("p",[s._v("构建Optimism monorepo和"),a("code",[s._v("op-geth")]),s._v("，与您为第一个节点所做的操作相同。")])]),s._v(" "),a("li",[a("p",[s._v("从第一个节点复制以下文件：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("~/op-geth/genesis.json\n~/optimism/op-node/rollup.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("创建一个新的"),a("code",[s._v("jwt.txt")]),s._v("文件作为共享密钥：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/op-geth\nopenssl rand -hex "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" jwt.txt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" jwt.txt ~/optimism/op-node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("初始化新的op-geth：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/op-geth\n./build/bin/geth init --datadir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./datadir ./genesis.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("要启用L2节点直接同步，而不是等待事务写入L1，请打开"),a("RouterLink",{attrs:{to:"/docs/build/getting-started/#op-node"}},[s._v("点对点同步")]),s._v("。\n如果您已经有点对点同步，请将新节点添加到"),a("code",[s._v("--p2p.static")]),s._v("列表中以进行同步。")],1)]),s._v(" "),a("li",[a("p",[s._v("启动"),a("code",[s._v("op-geth")]),s._v("（使用与初始节点相同的命令行）")])]),s._v(" "),a("li",[a("p",[s._v("启动"),a("code",[s._v("op-node")]),s._v("（使用与初始节点相同的命令行，但删除"),a("code",[s._v("--sequencer.enabled")]),s._v("和"),a("code",[s._v("--sequencer.l1-confs")]),s._v("标志以禁用序列器模式）")])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);