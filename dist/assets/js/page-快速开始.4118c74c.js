(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{638:function(t,s,a){"use strict";a.r(s);var e=a(2),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("请"),a("strong",[t._v("准备大约一小时的时间")]),t._v("来正确运行所有内容，并"),a("strong",[t._v("仔细阅读指南")]),t._v("。\n您不想错过任何重要的步骤，可能会在后续过程中引起问题。")])]),t._v(" "),a("p",[t._v("本教程"),a("strong",[t._v("专为开发人员设计")]),t._v("，旨在通过启动一个OP Stack测试网络链来了解OP Stack的所有组件，并教授完整的部署过程。\n您将拥有自己的OP Stack测试网络。")]),t._v(" "),a("p",[t._v("您可以使用此测试网络进行实验和测试，或者选择修改链以适应自己的需求。\n"),a("strong",[t._v("OP Stack是完全基于MIT许可的自由和开源软件")]),t._v("。\n您无需获得任何人的许可即可自由修改或部署堆栈的任何配置。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("对OP Stack的修改可能会导致链无法从"),a("a",{attrs:{href:"/op-stack/explainer"}},[t._v("Optimism Superchain")]),t._v("的某些方面受益。\n请务必查看"),a("a",{attrs:{href:"/op-stack/explainer"}},[t._v("Superchain Explainer")]),t._v("以了解更多信息。")])]),t._v(" "),a("h2",{attrs:{id:"我们将要部署的内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我们将要部署的内容"}},[t._v("#")]),t._v(" 我们将要部署的内容")]),t._v(" "),a("p",[t._v("在部署OP Stack链时，您将设置四个不同的组件。\n在开始部署链之前，了解每个组件的功能非常有用。")]),t._v(" "),a("h3",{attrs:{id:"智能合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#智能合约"}},[t._v("#")]),t._v(" 智能合约")]),t._v(" "),a("p",[t._v("OP Stack使您能够部署自己的Rollup链，该链使用Layer 1区块链来托管和排序交易数据。\nOP Stack链使用L1区块链上的多个智能合约来管理Rollup的各个方面。\n每个OP Stack链在创建时部署自己的一组L1智能合约。\n我们将使用"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism",target:"_blank",rel:"noopener noreferrer"}},[t._v("Optimism Monorepo"),a("OutboundLink")],1),t._v("中的"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism/tree/develop/packages/contracts-bedrock",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("contracts-bedrock")]),t._v("包"),a("OutboundLink")],1),t._v("中的L1智能合约。")]),t._v(" "),a("h3",{attrs:{id:"sequencer节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sequencer节点"}},[t._v("#")]),t._v(" Sequencer节点")]),t._v(" "),a("p",[t._v("OP Stack链使用Sequencer节点从用户那里收集交易并将其发布到L1区块链。\n原始（未修改的）OP Stack链依赖于至少一个这样的Sequencer节点，因此我们需要运行一个。\n如果需要，您还可以运行其他非Sequencer节点（本教程不包括在内）。")]),t._v(" "),a("h4",{attrs:{id:"共识客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#共识客户端"}},[t._v("#")]),t._v(" 共识客户端")]),t._v(" "),a("p",[t._v("OP Stack节点，就像以太坊节点一样，具有共识客户端。\n共识客户端负责确定属于您的区块链的区块和交易的列表和顺序。\nOP Stack共识客户端有多个实现，包括由OP Labs维护的"),a("code",[t._v("op-node")]),t._v("和由a16z维护的"),a("a",{attrs:{href:"https://github.com/a16z/magi",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("magi")]),a("OutboundLink")],1),t._v("。\n在本教程中，我们将使用"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism",target:"_blank",rel:"noopener noreferrer"}},[t._v("Optimism Monorepo"),a("OutboundLink")],1),t._v("中的"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism/tree/develop/op-node",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("op-node")]),t._v("实现"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"执行客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行客户端"}},[t._v("#")]),t._v(" 执行客户端")]),t._v(" "),a("p",[t._v("OP Stack节点，就像以太坊节点一样，还具有执行客户端。\n执行客户端负责执行交易并存储/更新区块链的状态。\nOP Stack执行客户端有多个实现，包括由OP Labs维护的"),a("code",[t._v("op-geth")]),t._v("，由Test in Prod维护的"),a("a",{attrs:{href:"https://github.com/testinprod-io/op-erigon",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("op-erigon")]),a("OutboundLink")],1),t._v("和即将推出的"),a("code",[t._v("op-nethermind")]),t._v("。\n在本教程中，我们将使用"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/op-geth",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("op-geth")]),t._v("实现"),a("OutboundLink")],1),t._v("，该实现位于"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/op-geth",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("op-geth")]),t._v("存储库"),a("OutboundLink")],1),t._v("中。")]),t._v(" "),a("h3",{attrs:{id:"批处理器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#批处理器"}},[t._v("#")]),t._v(" 批处理器")]),t._v(" "),a("p",[t._v("批处理器是从Sequencer到L1区块链发布交易的实体。\n批处理器与Sequencer连续运行，并定期批量发布交易。\n我们将使用"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism",target:"_blank",rel:"noopener noreferrer"}},[t._v("Optimism Monorepo"),a("OutboundLink")],1),t._v("中的"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism/tree/develop/op-batcher",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("op-batcher")]),t._v("实现"),a("OutboundLink")],1),t._v("作为批处理器组件。")]),t._v(" "),a("h3",{attrs:{id:"提议者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提议者"}},[t._v("#")]),t._v(" 提议者")]),t._v(" "),a("p",[t._v("提议者是负责将交易"),a("em",[t._v("结果")]),t._v("（以L2状态根的形式）发布到L1区块链的实体。\n这允许L1上的智能合约读取L2的状态，这对于跨链通信和用户提款是必要的。\n未来可能会删除提议者，但目前它是OP Stack的必要组件。\n我们将使用"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism",target:"_blank",rel:"noopener noreferrer"}},[t._v("Optimism Monorepo"),a("OutboundLink")],1),t._v("中的"),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism/tree/develop/op-proposer",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("op-proposer")]),t._v("实现"),a("OutboundLink")],1),t._v("作为提议者组件。")]),t._v(" "),a("h2",{attrs:{id:"软件依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#软件依赖"}},[t._v("#")]),t._v(" 软件依赖")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("依赖项")]),t._v(" "),a("th",[t._v("版本")]),t._v(" "),a("th",[t._v("版本检查命令")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"https://git-scm.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("git"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("code",[t._v("^2")])]),t._v(" "),a("td",[a("code",[t._v("git --version")])])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://go.dev/",target:"_blank",rel:"noopener noreferrer"}},[t._v("go"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("code",[t._v("^1.21")])]),t._v(" "),a("td",[a("code",[t._v("go version")])])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("node"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("code",[t._v("^20")])]),t._v(" "),a("td",[a("code",[t._v("node --version")])])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pnpm.io/installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("pnpm"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("code",[t._v("^8")])]),t._v(" "),a("td",[a("code",[t._v("pnpm --version")])])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://github.com/foundry-rs/foundry#installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("foundry"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("code",[t._v("^0.2.0")])]),t._v(" "),a("td",[a("code",[t._v("forge --version")])])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://linux.die.net/man/1/make",target:"_blank",rel:"noopener noreferrer"}},[t._v("make"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("code",[t._v("^4")])]),t._v(" "),a("td",[a("code",[t._v("make --version")])])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://github.com/jqlang/jq",target:"_blank",rel:"noopener noreferrer"}},[t._v("jq"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("code",[t._v("^1.6")])]),t._v(" "),a("td",[a("code",[t._v("jq --version")])])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://direnv.net",target:"_blank",rel:"noopener noreferrer"}},[t._v("direnv"),a("OutboundLink")],1)]),t._v(" "),a("td",[a("code",[t._v("^2")])]),t._v(" "),a("td",[a("code",[t._v("direnv --version")])])])])]),t._v(" "),a("h3",{attrs:{id:"特定依赖项说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特定依赖项说明"}},[t._v("#")]),t._v(" 特定依赖项说明")]),t._v(" "),a("h4",{attrs:{id:"node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[t._v("#")]),t._v(" "),a("code",[t._v("node")])]),t._v(" "),a("p",[t._v("我们建议使用最新的LTS版本的Node.js（目前为v20）。\n"),a("a",{attrs:{href:"https://github.com/nvm-sh/nvm",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("nvm")]),a("OutboundLink")],1),t._v("是一个有用的工具，可以帮助您在计算机上管理多个Node.js版本。\n在旧版本的Node.js上可能会遇到意外错误。")]),t._v(" "),a("h4",{attrs:{id:"direnv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#direnv"}},[t._v("#")]),t._v(" "),a("code",[t._v("direnv")])]),t._v(" "),a("p",[t._v("本教程的部分内容使用"),a("a",{attrs:{href:"https://direnv.net",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("direnv")]),a("OutboundLink")],1),t._v("来从"),a("code",[t._v(".envrc")]),t._v("文件中加载环境变量到您的shell中。\n这意味着您无需每次使用环境变量时都手动导出它们。\n"),a("code",[t._v("direnv")]),t._v("只能访问您明确允许其查看的文件。")]),t._v(" "),a("p",[t._v("在"),a("a",{attrs:{href:"https://direnv.net/docs/installation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装"),a("code",[t._v("direnv")]),a("OutboundLink")],1),t._v("之后，您需要"),a("strong",[t._v("确保"),a("a",{attrs:{href:"https://direnv.net/docs/hook.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("direnv")]),t._v("已连接到您的shell"),a("OutboundLink")],1)]),t._v("。\nMake sure you've followed "),a("a",{attrs:{href:"https://direnv.net/docs/hook.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("the guide on the "),a("code",[t._v("direnv")]),t._v(" website"),a("OutboundLink")],1),t._v(", then "),a("strong",[t._v("close your terminal and reopen it")]),t._v(" so that the changes take effect (or "),a("code",[t._v("source")]),t._v(" your config file if you know how to do that).")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("确保您已正确将"),a("code",[t._v("direnv")]),t._v("连接到您的shell，通过修改您的shell配置文件（如"),a("code",[t._v("~/.bashrc")]),t._v("或"),a("code",[t._v("~/.zshrc")]),t._v("）。\n如果您没有编辑配置文件，那么您可能没有正确配置"),a("code",[t._v("direnv")]),t._v("（并且后续可能无法正常工作）。")])]),t._v(" "),a("h2",{attrs:{id:"获取sepolia节点访问权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取sepolia节点访问权限"}},[t._v("#")]),t._v(" 获取Sepolia节点访问权限")]),t._v(" "),a("p",[t._v("我们将部署一个使用Layer 1区块链来托管和排序交易数据的OP Stack Rollup链。\nOP Stack Rollup旨在使用EVM等效的区块链，如以太坊、OP Mainnet或标准以太坊测试网络作为它们的L1链。")]),t._v(" "),a("p",[a("strong",[t._v("本指南使用Sepolia测试网络作为L1链")]),t._v("。\n我们建议您也使用Sepolia。\n您也可以使用其他兼容EVM的区块链，但可能会遇到意外错误。\n如果您想使用其他网络，请仔细检查每个命令，并将任何Sepolia特定的值替换为您网络的值。")]),t._v(" "),a("p",[t._v("由于我们将部署OP Stack链到Sepolia，您需要访问Sepolia节点。\n您可以使用类似"),a("a",{attrs:{href:"https://www.alchemy.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Alchemy"),a("OutboundLink")],1),t._v("的节点提供商（更简单），或者运行自己的Sepolia节点（更困难）。")]),t._v(" "),a("h2",{attrs:{id:"构建源代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建源代码"}},[t._v("#")]),t._v(" 构建源代码")]),t._v(" "),a("p",[t._v("我们将直接从源代码启动OP Stack链，而不是使用像"),a("a",{attrs:{href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),a("OutboundLink")],1),t._v("这样的容器系统。\n尽管这增加了一些额外的步骤，但这意味着如果您想修改堆栈的行为，您将更容易做到。\n如果您想了解我们将使用的各个组件的摘要，请再次查看上面的"),a("a",{attrs:{href:"#what-were-going-to-deploy"}},[t._v("我们将部署什么")]),t._v("部分。")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("为了简单起见，本教程将使用主目录"),a("code",[t._v("~/")]),t._v("作为工作目录。\n您可以使用任何目录，但使用主目录将使您能够复制/粘贴本指南中的命令。\n如果选择使用其他目录，请确保在本教程的所有命令中使用正确的目录。")])]),t._v(" "),a("h3",{attrs:{id:"构建optimism-monorepo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建optimism-monorepo"}},[t._v("#")]),t._v(" 构建Optimism Monorepo")]),t._v(" "),a("h4",{attrs:{id:"_1-克隆optimism-monorepo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-克隆optimism-monorepo"}},[t._v("#")]),t._v(" 1. 克隆Optimism Monorepo")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/ethereum-optimism/optimism.git\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"_2-进入optimism-monorepo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-进入optimism-monorepo"}},[t._v("#")]),t._v(" 2. 进入Optimism Monorepo")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" optimism\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-检查依赖项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-检查依赖项"}},[t._v("#")]),t._v(" 3. 检查依赖项")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("不要跳过这一步！在继续之前，请确保您已安装所有所需的依赖项。")])]),t._v(" "),a("p",[t._v("运行以下脚本，并仔细检查您是否已安装了所有所需的版本。\n如果您没有安装正确的版本，可能会遇到意外错误。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("./packages/contracts-bedrock/scripts/getting-started/versions.sh\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_4-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装依赖"}},[t._v("#")]),t._v(" 4. 安装依赖")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_5-在-optimism-monorepo-中构建各个包。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-在-optimism-monorepo-中构建各个包。"}},[t._v("#")]),t._v(" 5. 在 Optimism Monorepo 中构建各个包。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" op-node op-batcher op-proposer\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" build\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"构建-op-geth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建-op-geth"}},[t._v("#")]),t._v(" 构建 "),a("code",[t._v("op-geth")])]),t._v(" "),a("h4",{attrs:{id:"_1-克隆-op-geth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-克隆-op-geth"}},[t._v("#")]),t._v(" 1. 克隆 op-geth")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/ethereum-optimism/op-geth.git\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"_2-进入-op-geth-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-进入-op-geth-目录"}},[t._v("#")]),t._v(" 2. 进入 op-geth 目录")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" op-geth\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-构建-op-geth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-构建-op-geth"}},[t._v("#")]),t._v(" 3. 构建 op-geth")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" geth\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"填写环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#填写环境变量"}},[t._v("#")]),t._v(" 填写环境变量")]),t._v(" "),a("p",[t._v("在我们开始部署链之前，您需要填写一些环境变量。")]),t._v(" "),a("h4",{attrs:{id:"_1-进入-optimism-monorepo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入-optimism-monorepo"}},[t._v("#")]),t._v(" 1. 进入 Optimism Monorepo")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-复制示例环境变量文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-复制示例环境变量文件"}},[t._v("#")]),t._v(" 2. 复制示例环境变量文件")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" .envrc.example .envrc\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-填写环境变量文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-填写环境变量文件"}},[t._v("#")]),t._v(" 3. 填写环境变量文件")]),t._v(" "),a("p",[t._v("打开环境变量文件并填写以下变量：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("变量名称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("L1_RPC_URL")])]),t._v(" "),a("td",[t._v("L1节点的URL（在本例中为Sepolia节点）。")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("L1_RPC_KIND")])]),t._v(" "),a("td",[t._v("连接的L1 RPC的类型，用于获取最佳的交易收据。有效选项："),a("code",[t._v("alchemy")]),t._v("、"),a("code",[t._v("quicknode")]),t._v("、"),a("code",[t._v("infura")]),t._v("、"),a("code",[t._v("parity")]),t._v("、"),a("code",[t._v("nethermind")]),t._v("、"),a("code",[t._v("debug_geth")]),t._v("、"),a("code",[t._v("erigon")]),t._v("、"),a("code",[t._v("basic")]),t._v("、"),a("code",[t._v("any")]),t._v("。")])])])]),t._v(" "),a("h2",{attrs:{id:"生成账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成账户"}},[t._v("#")]),t._v(" 生成账户")]),t._v(" "),a("p",[t._v("在设置链时，您将需要四个账户及其私钥：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Admin")]),t._v("账户具有升级合约的能力。")]),t._v(" "),a("li",[a("code",[t._v("Batcher")]),t._v("账户将Sequencer事务数据发布到L1。")]),t._v(" "),a("li",[a("code",[t._v("Proposer")]),t._v("账户将L2事务结果（状态根）发布到L1。")]),t._v(" "),a("li",[a("code",[t._v("Sequencer")]),t._v("账户在p2p网络上签署区块。")])]),t._v(" "),a("h4",{attrs:{id:"_1-进入optimism-monorepo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入optimism-monorepo"}},[t._v("#")]),t._v(" 1. 进入Optimism Monorepo")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-生成新的账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-生成新的账户"}},[t._v("#")]),t._v(" 2. 生成新的账户")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("Warning")]),t._v(" "),a("p",[t._v("对于生产环境的部署，您不应该使用 "),a("code",[t._v("wallets.sh")]),t._v(" 工具。\n如果您要将基于 OP Stack 的链部署到生产环境中，您应该使用硬件安全模块和硬件钱包的组合。")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("./packages/contracts-bedrock/scripts/getting-started/wallets.sh\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-检查输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-检查输出"}},[t._v("#")]),t._v(" 3. 检查输出")]),t._v(" "),a("p",[t._v("确保您看到类似以下内容的输出：")]),t._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Copy the following into your .envrc file:\n \n# Admin account\nexport GS_ADMIN_ADDRESS=0x9625B9aF7C42b4Ab7f2C437dbc4ee749d52E19FC\nexport GS_ADMIN_PRIVATE_KEY=0xbb93a75f64c57c6f464fd259ea37c2d4694110df57b2e293db8226a502b30a34\n \n# Batcher account\nexport GS_BATCHER_ADDRESS=0xa1AEF4C07AB21E39c37F05466b872094edcf9cB1\nexport GS_BATCHER_PRIVATE_KEY=0xe4d9cd91a3e53853b7ea0dad275efdb5173666720b1100866fb2d89757ca9c5a\n \n# Proposer account\nexport GS_PROPOSER_ADDRESS=0x40E805e252D0Ee3D587b68736544dEfB419F351b\nexport GS_PROPOSER_PRIVATE_KEY=0x2d1f265683ebe37d960c67df03a378f79a7859038c6d634a61e40776d561f8a2\n \n# Sequencer account\nexport GS_SEQUENCER_ADDRESS=0xC06566E8Ec6cF81B4B26376880dB620d83d50Dfb\nexport GS_SEQUENCER_PRIVATE_KEY=0x2a0290473f3838dbd083a5e17783e3cc33c905539c0121f9c76614dda8a38dca\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("h4",{attrs:{id:"_4-保存账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-保存账户"}},[t._v("#")]),t._v(" 4. 保存账户")]),t._v(" "),a("p",[t._v("将上一步的输出复制并按照指示粘贴到您的 "),a("code",[t._v(".envrc")]),t._v(" 文件中。")]),t._v(" "),a("h4",{attrs:{id:"_5-给账户充值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-给账户充值"}},[t._v("#")]),t._v(" 5. 给账户充值")]),t._v(" "),a("p",[a("strong",[t._v("您需要向 "),a("code",[t._v("Admin")]),t._v("、"),a("code",[t._v("Proposer")]),t._v(" 和 "),a("code",[t._v("Batcher")]),t._v(" 账户发送 ETH。")]),t._v("\n所需的 ETH 金额取决于使用的 L1 网络。\n"),a("strong",[t._v("您无需向 "),a("code",[t._v("Sequencer")]),t._v(" 账户发送任何 ETH，因为它不发送交易。")])]),t._v(" "),a("p",[t._v("我们建议在使用 Sepolia 时，按照以下金额给账户充值：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Admin")]),t._v(" — 0.2 ETH")]),t._v(" "),a("li",[a("code",[t._v("Proposer")]),t._v(" — 0.2 ETH")]),t._v(" "),a("li",[a("code",[t._v("Batcher")]),t._v(" — 0.1 ETH")])]),t._v(" "),a("h2",{attrs:{id:"加载环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载环境变量"}},[t._v("#")]),t._v(" 加载环境变量")]),t._v(" "),a("p",[t._v("现在我们已经填写了环境变量文件，我们需要将这些变量加载到我们的终端中。")]),t._v(" "),a("h4",{attrs:{id:"_1-进入-optimism-monorepo-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入-optimism-monorepo-2"}},[t._v("#")]),t._v(" 1. 进入 Optimism Monorepo")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-使用-direnv-加载这些变量。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-direnv-加载这些变量。"}},[t._v("#")]),t._v(" 2. 使用 direnv 加载这些变量。")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("我们将使用 "),a("code",[t._v("direnv")]),t._v(" 来将环境变量从 "),a("code",[t._v(".envrc")]),t._v(" 文件加载到我们的终端中。\n请确保您已经"),a("a",{attrs:{href:"https://direnv.net/docs/installation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装了 "),a("code",[t._v("direnv")]),a("OutboundLink")],1),t._v("，并且已经正确地"),a("a",{attrs:{href:"#configuring-direnv"}},[t._v("将 "),a("code",[t._v("direnv")]),t._v(" 集成到您的 shell")]),t._v("中。")])]),t._v(" "),a("p",[t._v("接下来，您需要使用以下命令允许 "),a("code",[t._v("direnv")]),t._v(" 读取此文件并将变量加载到您的终端中。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("direnv allow\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("警告：每当您的 "),a("code",[t._v(".envrc")]),t._v(" 文件发生更改时，"),a("code",[t._v("direnv")]),t._v(" 将自动卸载自身。\n"),a("strong",[t._v("您必须每次更改 "),a("code",[t._v(".envrc")]),t._v(" 文件后重新运行以下命令。")])])]),t._v(" "),a("h4",{attrs:{id:"_3-确认变量已加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-确认变量已加载"}},[t._v("#")]),t._v(" 3. 确认变量已加载")]),t._v(" "),a("p",[t._v("运行 "),a("code",[t._v("direnv allow")]),t._v(" 后，您应该看到类似以下内容的输出（实际输出会根据您设置的变量而有所不同，如果不完全相同也不用担心）：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("direnv: loading ~/optimism/.envrc                                                            \ndirenv: "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" +DEPLOYMENT_CONTEXT +ETHERSCAN_API_KEY +GS_ADMIN_ADDRESS +GS_ADMIN_PRIVATE_KEY +GS_BATCHER_ADDRESS +GS_BATCHER_PRIVATE_KEY +GS_PROPOSER_ADDRESS +GS_PROPOSER_PRIVATE_KEY +GS_SEQUENCER_ADDRESS +GS_SEQUENCER_PRIVATE_KEY +IMPL_SALT +L1_RPC_KIND +L1_RPC_URL +PRIVATE_KEY +TENDERLY_PROJECT +TENDERLY_USERNAME\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[a("strong",[t._v("如果您没有看到这个输出，那么您可能没有"),a("a",{attrs:{href:"#configuring-direnv"}},[t._v("正确配置"),a("code",[t._v("direnv")])]),t._v("。")]),t._v("\n请确保您已经正确配置了"),a("code",[t._v("direnv")]),t._v("并再次运行"),a("code",[t._v("direnv allow")]),t._v("，以便看到所需的输出。")]),t._v(" "),a("h2",{attrs:{id:"配置您的网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置您的网络"}},[t._v("#")]),t._v(" 配置您的网络")]),t._v(" "),a("p",[t._v("一旦您构建了这两个存储库，您将需要返回到 Optimism Monorepo 来设置链的配置文件。\n目前，链的配置文件位于 "),a("a",{attrs:{href:"https://github.com/ethereum-optimism/optimism/tree/129032f15b76b0d2a940443a39433de931a97a44/packages/contracts-bedrock",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("contracts-bedrock")]),a("OutboundLink")],1),t._v(" 包中，以 JSON 文件的形式存在。")]),t._v(" "),a("h4",{attrs:{id:"_1-进入-optimism-monorepo-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入-optimism-monorepo-3"}},[t._v("#")]),t._v(" 1. 进入 Optimism Monorepo")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-进入-contracts-bedrock-包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-进入-contracts-bedrock-包"}},[t._v("#")]),t._v(" 2. 进入 contracts-bedrock 包")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" packages/contracts-bedrock\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-生成配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-生成配置文件"}},[t._v("#")]),t._v(" 3. 生成配置文件")]),t._v(" "),a("p",[t._v("运行以下脚本，在 "),a("code",[t._v("deploy-config")]),t._v(" 目录下生成 "),a("code",[t._v("getting-started.json")]),t._v(" 配置文件。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("./scripts/getting-started/config.sh\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_4-查看配置文件-可选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看配置文件-可选"}},[t._v("#")]),t._v(" 4. 查看配置文件（可选）")]),t._v(" "),a("p",[t._v("如果您愿意，您可以通过在您喜欢的文本编辑器中打开 "),a("code",[t._v("deploy-config/getting-started.json")]),t._v(" 来查看刚刚生成的配置文件。\n我们建议您暂时保持此文件不变，以避免遇到任何意外错误。")]),t._v(" "),a("h2",{attrs:{id:"部署-l1-合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署-l1-合约"}},[t._v("#")]),t._v(" 部署 L1 合约")]),t._v(" "),a("p",[t._v("一旦您配置了网络，就可以部署链的功能所必需的 L1 合约。")]),t._v(" "),a("h4",{attrs:{id:"_1-部署-l1-合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-部署-l1-合约"}},[t._v("#")]),t._v(" 1. 部署 L1 合约")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("forge script scripts/Deploy.s.sol:Deploy --private-key "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$GS_ADMIN_PRIVATE_KEY")]),t._v(" --broadcast --rpc-url "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$L1_RPC_URL")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("如果您看到一个包含 "),a("code",[t._v("EvmError: Revert")]),t._v(" 和 "),a("code",[t._v("Script failed")]),t._v(" 的不明确的错误，那么您可能需要更改 "),a("code",[t._v("IMPL_SALT")]),t._v(" 环境变量。\n这个变量确定了通过 "),a("a",{attrs:{href:"https://eips.ethereum.org/EIPS/eip-1014",target:"_blank",rel:"noopener noreferrer"}},[t._v("CREATE2"),a("OutboundLink")],1),t._v(" 部署的各种智能合约的地址。\n如果使用相同的 "),a("code",[t._v("IMPL_SALT")]),t._v(" 部署相同的合约两次，第二次部署将失败。\n"),a("strong",[t._v("您可以通过在 Optimism Monorepo 的任何位置运行 "),a("code",[t._v("direnv allow")]),t._v(" 来生成一个新的 "),a("code",[t._v("IMPL_SALT")]),t._v("。")])])]),t._v(" "),a("h4",{attrs:{id:"_2-生成合约构件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-生成合约构件"}},[t._v("#")]),t._v(" 2. 生成合约构件")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("forge script scripts/Deploy.s.sol:Deploy --sig "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sync()'")]),t._v(" --rpc-url "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$L1_RPC_URL")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"生成-l2-配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成-l2-配置文件"}},[t._v("#")]),t._v(" 生成 L2 配置文件")]),t._v(" "),a("p",[t._v("现在我们已经设置了 L1 智能合约，我们可以自动生成用于共识客户端和执行客户端的几个配置文件。")]),t._v(" "),a("p",[t._v("我们需要生成三个重要的文件：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("genesis.json")]),t._v(" 包含执行客户端的创世状态链。")]),t._v(" "),a("li",[a("code",[t._v("rollup.json")]),t._v(" 包含共识客户端的配置信息。")]),t._v(" "),a("li",[a("code",[t._v("jwt.txt")]),t._v(" 是一个 "),a("a",{attrs:{href:"https://jwt.io/introduction",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSON Web Token"),a("OutboundLink")],1),t._v("，用于确保只有共识客户端和执行客户端之间可以进行通信。\n您可以使用以下命令生成 JWT：")])]),t._v(" "),a("h4",{attrs:{id:"_1-进入-op-node-包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入-op-node-包"}},[t._v("#")]),t._v(" 1. 进入 op-node 包")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism/op-node\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-创建创世文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建创世文件"}},[t._v("#")]),t._v(" 2. 创建创世文件")]),t._v(" "),a("p",[t._v("现在我们将在 "),a("code",[t._v("op-node")]),t._v(" 文件夹中生成 "),a("code",[t._v("genesis.json")]),t._v(" 和 "),a("code",[t._v("rollup.json")]),t._v(" 文件：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("go run cmd/main.go genesis l2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --deploy-config "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/packages/contracts-bedrock/deploy-config/getting-started.json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --deployment-dir "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/packages/contracts-bedrock/deployments/getting-started/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --outfile.l2 genesis.json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --outfile.rollup rollup.json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --l1-rpc "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$L1_RPC_URL")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h4",{attrs:{id:"_3-创建身份验证密钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建身份验证密钥"}},[t._v("#")]),t._v(" 3. 创建身份验证密钥")]),t._v(" "),a("p",[t._v("接下来，您将创建一个 "),a("a",{attrs:{href:"https://jwt.io/introduction",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSON Web Token"),a("OutboundLink")],1),t._v("，用于对共识客户端和执行客户端进行身份验证。\n该令牌用于确保只有共识客户端和执行客户端之间可以进行通信。\n您可以使用以下命令生成 JWT：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("openssl rand -hex "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" jwt.txt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_4-将创世文件复制到-op-geth-目录中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-将创世文件复制到-op-geth-目录中"}},[t._v("#")]),t._v(" 4. 将创世文件复制到 op-geth 目录中")]),t._v(" "),a("p",[t._v("最后，我们需要将 "),a("code",[t._v("genesis.json")]),t._v(" 文件和 "),a("code",[t._v("jwt.txt")]),t._v(" 文件复制到 "),a("code",[t._v("op-geth")]),t._v(" 目录中，以便我们可以用它来初始化和运行 "),a("code",[t._v("op-geth")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" genesis.json ~/op-geth\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" jwt.txt ~/op-geth\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"初始化-op-geth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化-op-geth"}},[t._v("#")]),t._v(" 初始化 "),a("code",[t._v("op-geth")])]),t._v(" "),a("p",[t._v("我们即将准备好运行我们的链！\n现在我们只需要运行几个命令来初始化 "),a("code",[t._v("op-geth")]),t._v("。\n我们将运行一个 Sequencer 节点，所以我们需要导入之前生成的 "),a("code",[t._v("Sequencer")]),t._v(" 私钥。\n这个私钥将用于我们的 Sequencer 签署新的区块。")]),t._v(" "),a("h4",{attrs:{id:"_1-进入-op-geth-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入-op-geth-目录"}},[t._v("#")]),t._v(" 1. 进入 op-geth 目录")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/op-geth\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-创建一个数据目录文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建一个数据目录文件夹"}},[t._v("#")]),t._v(" 2. 创建一个数据目录文件夹")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" datadir\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-初始化-op-geth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-初始化-op-geth"}},[t._v("#")]),t._v(" 3. 初始化 "),a("code",[t._v("op-geth")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("build/bin/geth init --datadir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("datadir genesis.json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"启动-op-geth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-op-geth"}},[t._v("#")]),t._v(" 启动 "),a("code",[t._v("op-geth")])]),t._v(" "),a("p",[t._v("现在我们将启动 "),a("code",[t._v("op-geth")]),t._v("，我们的执行客户端。\n请注意，在下一步启动共识客户端之前，您不会看到任何交易。")]),t._v(" "),a("h4",{attrs:{id:"_1-打开一个新的终端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-打开一个新的终端"}},[t._v("#")]),t._v(" 1. 打开一个新的终端")]),t._v(" "),a("p",[t._v("我们需要一个终端窗口来运行 "),a("code",[t._v("op-geth")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"_2-切换到-op-geth-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-切换到-op-geth-目录"}},[t._v("#")]),t._v(" 2. 切换到 op-geth 目录")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/op-geth\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-运行-op-geth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行-op-geth"}},[t._v("#")]),t._v(" 3. 运行 op-geth")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[t._v("在这里我们使用 "),a("code",[t._v("--gcmode=archive")]),t._v(" 来运行 "),a("code",[t._v("op-geth")]),t._v("，因为这个节点将充当我们的 Sequencer。\n在归档模式下运行 Sequencer 是有用的，因为 "),a("code",[t._v("op-proposer")]),t._v(" 需要访问完整的状态。\n如果您想节省磁盘空间，可以随意在其他（非 Sequencer）节点上运行全模式。")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("./build/bin/geth "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --datadir ./datadir "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --http "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --http.corsdomain"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --http.vhosts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --http.addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --http.api"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("web3,debug,eth,txpool,net,engine "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --ws "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --ws.addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --ws.port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8546")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --ws.origins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --ws.api"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("debug,eth,txpool,net,engine "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --syncmode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("full "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --gcmode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("archive "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --nodiscover "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --maxpeers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --networkid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("42069")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --authrpc.vhosts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --authrpc.addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --authrpc.port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8551")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --authrpc.jwtsecret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./jwt.txt "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --rollup.disabletxpoolgossip"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br")])]),a("h2",{attrs:{id:"启动-op-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-op-node"}},[t._v("#")]),t._v(" 启动 "),a("code",[t._v("op-node")])]),t._v(" "),a("p",[t._v("一旦我们成功运行了 "),a("code",[t._v("op-geth")]),t._v("，我们需要运行 "),a("code",[t._v("op-node")]),t._v("。\n与以太坊类似，OP Stack 有一个共识客户端（"),a("code",[t._v("op-node")]),t._v("）和一个执行客户端（"),a("code",[t._v("op-geth")]),t._v('）。\n共识客户端通过 Engine API "驱动" 执行客户端。')]),t._v(" "),a("h4",{attrs:{id:"_1-打开一个新的终端-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-打开一个新的终端-2"}},[t._v("#")]),t._v(" 1. 打开一个新的终端")]),t._v(" "),a("p",[t._v("我们需要一个终端窗口来运行 "),a("code",[t._v("op-node")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"_2-切换到-op-node-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-切换到-op-node-目录"}},[t._v("#")]),t._v(" 2. 切换到 op-node 目录")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism/op-node\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-运行-op-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行-op-node"}},[t._v("#")]),t._v(" 3. 运行 op-node")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("./bin/op-node "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--l2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://localhost:8551 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--l2.jwt-secret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./jwt.txt "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--sequencer.enabled "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--sequencer.l1-confs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--verifier.l1-confs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--rollup.config"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("./rollup.json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--rpc.addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--rpc.port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8547")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--p2p.disable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--rpc.enable-admin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--p2p.sequencer.key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$GS_SEQUENCER_PRIVATE_KEY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--l1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$L1_RPC_URL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\t--l1.rpckind"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$L1_RPC_KIND")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("运行此命令后，您将开始看到 "),a("code",[t._v("op-node")]),t._v(" 开始从 L1 链同步 L2 块。\n一旦 "),a("code",[t._v("op-node")]),t._v(" 追上了 L1 链的最新块，它将开始将块发送给 "),a("code",[t._v("op-geth")]),t._v(" 进行执行。\n此时，您将开始在 "),a("code",[t._v("op-geth")]),t._v(" 中看到创建的块。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[a("strong",[t._v("默认情况下，您的 "),a("code",[t._v("op-node")]),t._v(" 将尝试使用点对点网络加速同步过程。")]),t._v("\n如果您使用的是其他人也在使用的链 ID，例如本教程的默认链 ID（42069），您的 "),a("code",[t._v("op-node")]),t._v(" 将接收到其他序列器签名的块。\n这些请求将失败并浪费时间和网络资源。\n"),a("strong",[t._v("为了避免这种情况，我们在开始时禁用了点对点同步（"),a("code",[t._v("--p2p.disable")]),t._v("）。")])]),t._v(" "),a("p",[t._v("一旦您拥有多个节点，您可能希望启用点对点同步。\n您可以在 "),a("code",[t._v("op-node")]),t._v(" 命令中添加以下选项以与特定节点启用点对点同步：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\t--p2p.static=<nodes> \\\n\t--p2p.listen.ip=0.0.0.0 \\\n\t--p2p.listen.tcp=9003 \\\n\t--p2p.listen.udp=9003 \\\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("您还可以选择删除 "),a("code",[t._v("--p2p.static")]),t._v(" 选项，但是您可能会看到来自使用相同链ID的其他链的请求失败。")])]),t._v(" "),a("h2",{attrs:{id:"启动-op-batcher"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-op-batcher"}},[t._v("#")]),t._v(" 启动 "),a("code",[t._v("op-batcher")])]),t._v(" "),a("p",[a("code",[t._v("op-batcher")]),t._v(" 从序列器获取交易，并将这些交易发布到 L1。\n一旦这些序列器交易被包含在一个最终的 L1 块中，它们就正式成为规范链的一部分。\n"),a("code",[t._v("op-batcher")]),t._v(" 是至关重要的！")]),t._v(" "),a("p",[t._v("最好给 "),a("code",[t._v("Batcher")]),t._v(" 账户至少 1 个 Sepolia ETH，以确保它可以继续运行而不会因为燃料不足而停止。\n请密切关注 "),a("code",[t._v("Batcher")]),t._v(" 账户的余额，因为如果有大量交易需要发布，它可能会快速消耗 ETH。")]),t._v(" "),a("h4",{attrs:{id:"_1-打开一个新的终端-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-打开一个新的终端-3"}},[t._v("#")]),t._v(" 1. 打开一个新的终端")]),t._v(" "),a("p",[t._v("我们需要一个终端窗口来运行 "),a("code",[t._v("op-batcher")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"_2-切换到-op-batcher-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-切换到-op-batcher-目录"}},[t._v("#")]),t._v(" 2. 切换到 op-batcher 目录")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism/op-batcher\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-运行-op-batcher"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行-op-batcher"}},[t._v("#")]),t._v(" 3. 运行 op-batcher")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("./bin/op-batcher "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --l2-eth-rpc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://localhost:8545 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --rollup-rpc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://localhost:8547 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --poll-interval"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("1s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --sub-safety-margin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --num-confirmations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --safe-abort-nonce-too-low-count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --resubmission-timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("30s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --rpc.addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --rpc.port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8548")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --rpc.enable-admin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --max-channel-duration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --l1-eth-rpc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$L1_RPC_URL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --private-key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$GS_BATCHER_PRIVATE_KEY")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Tips")]),t._v(" "),a("p",[a("code",[t._v("--max-channel-duration=n")]),t._v(" 设置告诉批处理器将所有数据写入 L1 每 "),a("code",[t._v("n")]),t._v(" 个 L1 块。\n当值较低时，交易频繁写入 L1，其他节点可以快速从 L1 同步。\n当值较高时，交易较少频繁写入 L1，批处理器消耗的 ETH 较少。\n如果您想降低成本，可以将此值设置为 0 禁用它，或者将其增加到较高的值。")])]),t._v(" "),a("h2",{attrs:{id:"启动-op-proposer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-op-proposer"}},[t._v("#")]),t._v(" 启动 "),a("code",[t._v("op-proposer")])]),t._v(" "),a("p",[t._v("现在启动 "),a("code",[t._v("op-proposer")]),t._v("，它将提议新的状态根。")]),t._v(" "),a("h4",{attrs:{id:"_1-打开一个新的终端-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-打开一个新的终端-4"}},[t._v("#")]),t._v(" 1. 打开一个新的终端")]),t._v(" "),a("p",[t._v("我们需要一个终端窗口来运行 "),a("code",[t._v("op-proposer")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"_2-切换到-op-proposer-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-切换到-op-proposer-目录"}},[t._v("#")]),t._v(" 2. 切换到 op-proposer 目录")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism/op-proposer\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-运行-op-proposer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行-op-proposer"}},[t._v("#")]),t._v(" 3. 运行 op-proposer")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("./bin/op-proposer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --poll-interval"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("12s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --rpc.port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8560")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --rollup-rpc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://localhost:8547 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --l2oo-address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/packages/contracts-bedrock/deployments/getting-started/L2OutputOracleProxy.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" jq -r .address"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --private-key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$GS_PROPOSER_PRIVATE_KEY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --l1-eth-rpc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$L1_RPC_URL")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h2",{attrs:{id:"连接您的钱包到您的链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接您的钱包到您的链"}},[t._v("#")]),t._v(" 连接您的钱包到您的链")]),t._v(" "),a("p",[t._v("您现在拥有一个完全功能的 OP Stack Rollup，其中 Sequencer 节点正在运行在 "),a("code",[t._v("http://localhost:8545")]),t._v("。\n您可以像连接其他任何 EVM 链一样将您的钱包连接到这个链上。\n如果您需要一个简单的方法来连接到您的链，只需"),a("a",{attrs:{href:"https://chainid.link?network=opstack-getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击这里"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"在您的链上获取-eth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在您的链上获取-eth"}},[t._v("#")]),t._v(" 在您的链上获取 ETH")]),t._v(" "),a("p",[t._v("一旦您连接了您的钱包，您可能会注意到您的链上没有任何 ETH 来支付燃料费。\n将 Sepolia ETH 存入您的链的最简单方法是直接将资金发送到 "),a("code",[t._v("L1StandardBridge")]),t._v(" 合约。")]),t._v(" "),a("h4",{attrs:{id:"_1-导航到-contracts-bedrock-目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-导航到-contracts-bedrock-目录"}},[t._v("#")]),t._v(" 1. 导航到 contracts-bedrock 目录")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/optimism/packages/contracts-bedrock\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-获取-l1standardbridgeproxy-合约的地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-获取-l1standardbridgeproxy-合约的地址"}},[t._v("#")]),t._v(" 2. 获取 L1StandardBridgeProxy 合约的地址")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" deployments/getting-started/L1StandardBridgeProxy.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" jq -r .address\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-将一些-sepolia-eth-发送到-l1standardbridgeproxy-合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-将一些-sepolia-eth-发送到-l1standardbridgeproxy-合约"}},[t._v("#")]),t._v(" 3. 将一些 Sepolia ETH 发送到 L1StandardBridgeProxy 合约")]),t._v(" "),a("p",[t._v("获取 L1 桥接代理合约地址，并使用您希望在 Rollup 上拥有 ETH 的钱包，向该地址发送一小笔 Sepolia ETH（0.1 或更少即可）。\n这将触发一笔存款，将在 L2 中铸造 ETH 到您的钱包中。\n这可能需要最多 5 分钟，才能在 L2 上的钱包中看到这些 ETH。")]),t._v(" "),a("h2",{attrs:{id:"观察您的-rollup-运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#观察您的-rollup-运行"}},[t._v("#")]),t._v(" 观察您的 Rollup 运行")]),t._v(" "),a("p",[t._v("您可以像与任何其他 EVM 链交互一样与您的 Rollup 进行交互。\n发送一些交易，部署一些合约，看看会发生什么！")]),t._v(" "),a("h2",{attrs:{id:"下一步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下一步"}},[t._v("#")]),t._v(" 下一步")]),t._v(" "),a("ul",[a("li",[t._v("您可以像使用任何其他测试区块链一样使用此 Rollup。")]),t._v(" "),a("li",[t._v("您可以"),a("a",{attrs:{href:"hacks/overview"}},[t._v("以各种方式修改区块链")]),t._v("。")]),t._v(" "),a("li",[t._v("如果遇到任何问题，请访问"),a("a",{attrs:{href:"chain-troubleshooting"}},[t._v("链操作员故障排除指南")]),t._v("寻求帮助。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);